!function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(e){return t(e,window,document)}):"object"==typeof exports?module.exports=function(e,o){return e||(e=window),o&&o.fn.dataTable||(o=require("datatables.net")(e,o).$),t(o,e,e.document)}:t(jQuery,window,document)}(function(t,e,o,a){"use strict";var n=t.fn.dataTable,l=0,i=function(e,o){if(!n.versionCheck||!n.versionCheck("1.10.8"))throw"Warning: altEditor requires DataTables 1.10.8 or greater";this.c=t.extend(!0,{},n.defaults.altEditor,i.defaults,o),this.s={dt:new n.Api(e),namespace:".altEditor"+l++},this.dom={modal:t('<div class="dt-altEditor-handle"/>')},this._constructor()};return t.extend(i.prototype,{_constructor:function(){var e=this,a=this.s.dt;e.onAddRow=a.settings()[0].oInit.onAddRow,e.onDeleteRow=a.settings()[0].oInit.onDeleteRow,e.onEditRow=a.settings()[0].oInit.onEditRow,e.logRowChange=function(t,e){console.log("Table data changed and no AJAX call setup!"),console.log(t),e()},e.onAddRow=null==e.onAddRow?e.logRowChange:e.onAddRow,e.onDeleteRow=null==e.onDeleteRow?e.logRowChange:e.onDeleteRow,e.onEditRow=null==e.onEditRow?e.logRowChange:e.onEditRow,this._setup(),a.on("destroy.altEditor",function(){a.off(".altEditor"),t(a.table().body()).off(e.s.namespace),t(o.body).off(e.s.namespace)})},_setup:function(){var e=this,a=this.s.dt;t("body").append('<div class="modal fade" id="altEditor-modal" tabindex="-1" role="dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h4 style="padding-top: 1rem;padding-left: 1rem;" class="modal-title"></h4><button style="margin: initial;" type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body"><p></p></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Close</button><input type="submit" form="altEditor-form" class="btn btn-primary"></input></div></div></div></div>'),a.button("edit:name")&&(a.button("edit:name").action(function(t,o,a,n){e._openEditModal()}),t(o).on("click","#editRowBtn",function(t){e._inputValidation()&&(t.preventDefault(),t.stopPropagation(),e._editRowData())})),a.button("delete:name")&&(a.button("delete:name").action(function(t,o,a,n){e._openDeleteModal()}),t(o).on("click","#deleteRowBtn",function(o){o.preventDefault(),o.stopPropagation(),e._deleteRow(),t(this).prop("disabled",!0)})),a.button("add:name")&&(a.button("add:name").action(function(t,o,a,n){e._openAddModal()}),t(o).on("click","#addRowBtn",function(t){e._inputValidation()&&(t.preventDefault(),t.stopPropagation(),e._addRowData())})),this.s.dt.button("refresh:name")&&this.s.dt.button("refresh:name").action(function(t,e,o,a){e.ajax&&e.ajax.url()&&e.ajax.reload()})},_emitEvent:function(e,o){this.s.dt.iterator("table",function(a,n){t(a.nTable).triggerHandler(e+".dt",o)})},_openEditModal:function(){var e=this.s.dt,o=[];for(var a in e.context[0].aoColumns){var n=e.context[0].aoColumns[a];o[a]={title:n.sTitle,name:n.data?n.data:n.mData,type:n.type?n.type:"text",options:n.options?n.options:[],msg:n.errorMsg?n.errorMsg:"",hoverMsg:n.hoverMsg?n.hoverMsg:"",pattern:n.pattern?n.pattern:".*",special:n.special?n.special:"",unique:!!n.unique&&n.unique,uniqueMsg:n.uniqueMsg?n.uniqueMsg:"",maxLength:!!n.maxLength&&n.maxLength,multiple:!!n.multiple&&n.multiple,select2:!!n.select2&&n.select2}}var l=e.rows({selected:!0}),i="";for(var d in i+="<form name='altEditor-form' role='form'>",o)if(o[d].type.includes("hidden"))i+="<input type='hidden' id='"+o[d].name+"' value='"+l.data()[0][o[d].name]+"'></input>";else{if(i+="<div style='margin-left: initial;margin-right: initial;' class='form-group row'>",i+="<div class='col-sm-3 col-md-3 col-lg-3 text-right' style='padding-top:4px;'>",i+="<label for='"+o[d].title+"'>"+o[d].title+":</label></div>",i+="<div class='col-sm-8 col-md-8 col-lg-8'>",o[d].type.includes("text")&&(i+="<input type='"+this._quoteattr(o[d].type)+"' id='"+this._quoteattr(o[d].name)+"'  pattern='"+this._quoteattr(o[d].pattern)+"'  title='"+this._quoteattr(o[d].hoverMsg)+"' name='"+this._quoteattr(o[d].title)+"' placeholder='"+this._quoteattr(o[d].title)+"' data-special='"+this._quoteattr(o[d].special)+"' data-errorMsg='"+this._quoteattr(o[d].msg)+"' data-uniqueMsg='"+this._quoteattr(o[d].uniqueMsg)+"' data-unique='"+o[d].unique+"'"+(0==o[d].maxLength?"":" maxlength='"+o[d].maxLength+"'")+" style='overflow:hidden'  class='form-control  form-control-sm' value='"+this._quoteattr(l.data()[0][o[d].name])+"'>",i+="<label id='"+o[d].name+"label' class='errorLabel'></label>"),o[d].type.includes("readonly")&&(i+="<input type='text' readonly  id='"+o[d].name+"' name='"+o[d].title+"' placeholder='"+o[d].title+"' style='overflow:hidden'  class='form-control  form-control-sm' value='"+l.data()[0][o[d].name]+"'>"),o[d].type.includes("select")){var s="";for(a=0;a<o[d].options.length;a++)l.data()[0][o[d].name].includes(o[d].options[a])?s+="<option value='"+o[d].options[a]+"'selected>"+o[d].options[a]+"</option>":s+="<option value='"+o[d].options[a]+"'>"+o[d].options[a]+"</option>";i+="<select class='form-control"+(o[d].select2?" select2":"")+"' id='"+o[d].name+"' name='"+o[d].title+"' "+(o[d].multiple?"multiple":"")+">"+s+"</select>"}i+="</div><div style='clear:both;'></div></div>"}for(var d in i+="</form>",t("#altEditor-modal").on("show.bs.modal",function(){t("#altEditor-modal").find(".modal-title").html("Edit Record"),t("#altEditor-modal").find(".modal-body").html(i),t("#altEditor-modal").find(".modal-footer").html('<button type="button" data-content="remove" class="btn btn-default" data-dismiss="modal">Close</button><button type="button" data-content="remove" class="btn btn-primary" id="editRowBtn">Edit</button>')}),t("#altEditor-modal").modal("show"),t("#altEditor-modal input[0]").focus(),o)o[d].select2&&t("#altEditor-modal").find("select#"+o[d].name).select2(o[d].select2)},_editRowData:function(){var e=this,o=this.s.dt,a={},n=o.rows({selected:!0});t('form[name="altEditor-form"] *').filter(":input").each(function(e){a[t(this).attr("id")]=t(this).val()}),e.onEditRow({old:n.data()[0],new:a},function(t){e._updateTableCallback(t,o)})},_openDeleteModal:function(){var e=this.s.dt,o=[];for(var a in e.context[0].aoColumns)o.push({title:e.context[0].aoColumns[a].sTitle,type:e.context[0].aoColumns[a].type?e.context[0].aoColumns[a].type:"text",name:e.context[0].aoColumns[a].data?e.context[0].aoColumns[a].data:e.context[0].aoColumns[a].mData});var n=e.rows({selected:!0}),l="";for(var i in l+="<form name='altEditor-form' role='form'>",o)o[i].type.includes("hidden")?l+="<input type='hidden' id='"+o[i].name+"' value='"+n.data()[0][o[i].name]+"'></input>":l+="<div style='margin-left: initial;margin-right: initial;' class='form-group row'><label for='"+this._quoteattr(o[i].title)+"'>"+o[i].title+" :  </label><input  type='hidden'  id='"+this._quoteattr(o[i].name)+"' name='"+this._quoteattr(o[i].title)+"' placeholder='"+this._quoteattr(o[i].title)+"' style='overflow:hidden'  class='form-control' value='"+this._quoteattr(n.data()[0][o[i].name])+"' >"+n.data()[0][o[i].name]+"</input></div>";l+="</form>",t("#altEditor-modal").on("show.bs.modal",function(){t("#altEditor-modal").find(".modal-title").html("Delete Record"),t("#altEditor-modal").find(".modal-body").html(l),t("#altEditor-modal").find(".modal-footer").html('<button type="button" data-content="remove" class="btn btn-default" data-dismiss="modal">Close</button><button type="button"  data-content="remove" class="btn btn-danger" id="deleteRowBtn">Delete</button>')}),t("#altEditor-modal").modal("show"),t("#altEditor-modal input[0]").focus()},_deleteRow:function(){var e=this,o=this.s.dt,a=(o.rows({selected:!0}),{});t('form[name="altEditor-form"] *').filter(":input").each(function(e){a[t(this).attr("id")]=t(this).val()}),e.onDeleteRow(a,function(t){e._updateTableCallback(t,o)})},_openAddModal:function(){var e=this.s.dt,o=[];for(var a in e.context[0].aoColumns){var n=e.context[0].aoColumns[a];o[a]={title:n.sTitle,name:n.data?n.data:n.mData,type:n.type?n.type:"text",options:n.options?n.options:[],msg:n.errorMsg?n.errorMsg:"",hoverMsg:n.hoverMsg?n.hoverMsg:"",pattern:n.pattern?n.pattern:".*",special:n.special?n.special:"",unique:!!n.unique&&n.unique,uniqueMsg:n.uniqueMsg?n.uniqueMsg:"",maxLength:!!n.maxLength&&n.maxLength,multiple:!!n.multiple&&n.multiple,select2:!!n.select2&&n.select2}}var l="";for(var i in l+="<form name='altEditor-form' role='form'>",o)if(o[i].type.includes("hidden"));else{if(l+="<div style='margin-left: initial;margin-right: initial;' class='form-group row'><div class='col-sm-3 col-md-3 col-lg-3 text-right' style='padding-top:4px;'><label for='"+o[i].title+"'>"+o[i].title+":</label></div><div class='col-sm-8 col-md-8 col-lg-8'>",o[i].type.includes("text")&&(l+="<input type='"+this._quoteattr(o[i].type)+"' id='"+this._quoteattr(o[i].name)+"'  pattern='"+this._quoteattr(o[i].pattern)+"'  title='"+this._quoteattr(o[i].hoverMsg)+"' name='"+this._quoteattr(o[i].title)+"' placeholder='"+this._quoteattr(o[i].title)+"' data-special='"+o[i].special+"' data-errorMsg='"+this._quoteattr(o[i].msg)+"' data-uniqueMsg='"+this._quoteattr(o[i].uniqueMsg)+"' data-unique='"+o[i].unique+"'"+(0==o[i].maxLength?"":" maxlength='"+o[i].maxLength+"'")+" style='overflow:hidden'  class='form-control  form-control-sm' value=''>",l+="<label id='"+this._quoteattr(o[i].name)+"label' class='errorLabel'></label>"),o[i].type.includes("readonly")&&(l+="<input type='text' readonly  id='"+this._quoteattr(o[i].name)+"' name='"+this._quoteattr(o[i].title)+"' placeholder='"+this._quoteattr(o[i].title)+"' style='overflow:hidden'  class='form-control  form-control-sm' value=''>"),o[i].type.includes("select")){var d="";for(a=0;a<o[i].options.length;a++)d+="<option value='"+this._quoteattr(o[i].options[a])+"'>"+o[i].options[a]+"</option>";l+="<select class='form-control"+(o[i].select2?" select2":"")+"' id='"+this._quoteattr(o[i].name)+"' name='"+this._quoteattr(o[i].title)+"' "+(o[i].multiple?"multiple":"")+">"+d+"</select>"}l+="</div><div style='clear:both;'></div></div>"}for(var i in l+="</form>",t("#altEditor-modal").on("show.bs.modal",function(){t("#altEditor-modal").find(".modal-title").html("Add Record"),t("#altEditor-modal").find(".modal-body").html(l),t("#altEditor-modal").find(".modal-footer").html('<button type="button" data-content="remove" class="btn btn-default" data-dismiss="modal">Close</button><button type="button"  data-content="remove" class="btn btn-primary" id="addRowBtn">Add</button>')}),t("#altEditor-modal").modal("show"),t("#altEditor-modal input[0]").focus(),o)o[i].select2&&t("#altEditor-modal").find("select#"+o[i].name).select2(o[i].select2)},_addRowData:function(){var e=this,o=this.s.dt,a={};t('form[name="altEditor-form"] *').filter(":input").each(function(e){a[t(this).attr("id")]=t(this).val()}),e.onAddRow(a,function(t){e._updateTableCallback(t,o)})},_updateTableCallback:function(e,o){if(null==e||""==e||200==e.status||e.success){t("#altEditor-modal .modal-body .alert").remove();var a='<div class="alert alert-success" role="alert"><strong>Success!</strong></div>';t("#altEditor-modal .modal-body").append(a),o.ajax&&o.ajax.url()&&o.ajax.reload(),t("div#altEditor-modal").find("button#addRowBtn").prop("disabled",!0),t("div#altEditor-modal").find("button#editRowBtn").prop("disabled",!0),t("div#altEditor-modal").find("button#deleteRowBtn").prop("disabled",!0)}else{var n=e;t("#altEditor-modal .modal-body .alert").remove();var l="There was an unknown error!";if(n.responseJSON&&n.responseJSON.errors)for(var i in l="",n.responseJSON.errors)l+=n.responseJSON.errors[i][0];a='<div class="alert alert-danger" role="alert"><strong>Error!</strong> '+(null==n.status?"":"Response code: "+n.status)+" "+l+"</div>";t("#altEditor-modal .modal-body").append(a)}},_inputValidation:function(){var e=this.s.dt,o=!1,a=0;return t('form[name="altEditor-form"] *').filter(":text").each(function(o){var n="#"+t(this).attr("id")+"label";if(t(n).hide(),t(n).empty(),t(this).val().match(t(this).attr("pattern"))){if("true"==t(this).attr("data-unique")){var l=e.column("th:contains('"+t(this).attr("name")+"')").data(),i=null;for(var d in null!=e.row({selected:!0}).index()&&(i=e.cell(e.row({selected:!0}).index(),e.column("th:contains('"+t(this).attr("name")+"')").index()).data()),l)t(this).val()==l[d]&&l[d]!=i&&(t(n).html(t(this).attr("data-uniqueMsg")),t(n).show(),a++)}}else t(n).html(t(this).attr("data-errorMsg")),t(n).show(),a++}),0==a&&(o=!0),o},_quoteattr:function(t,e){return e=e?"&#13;":"\n",(""+t).replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r\n/g,e).replace(/[\r\n]/g,e)}}),i.version="2.0",i.defaults={alwaysAsk:!1,focus:null,columns:"",update:null,editor:null},i.classes={btn:"btn"},t(o).on("preInit.dt.altEditor",function(e,o,a){if("dt"===e.namespace){var l=o.oInit.altEditor,d=n.defaults.altEditor;if(l||d){var s=t.extend({},l,d);!1!==l&&new i(o,s)}}}),n.altEditor=i,i});